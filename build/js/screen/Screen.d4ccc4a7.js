import{r as e,d as t,b as a,o as l,f as s,j as i,l as o,c as r,m as d,I as n,s as c,J as m,K as u,i as h,E as p,g as f,L as v,M as g,N as y,q as b,O as x}from"../@vue/@vue.34aa33bd.js";import{H as w,a as D}from"../@microsoft/@microsoft.1443ac28.js";import{_ as S}from"../../assets/index.82d608c6.js";import"../echarts/echarts.4f3bd78e.js";import{X as _}from"../zrender/zrender.44d88fed.js";import"../vue-router/vue-router.e01dd92f.js";import"../@kjgl77/@kjgl77.bf9f8be8.js";import"../vue-wechat-title/vue-wechat-title.577cc923.js";import"../tslib/tslib.e35f93b8.js";let R=null;const M=(e,t=void 0)=>{void 0===t&&(t="http://192.168.1.153:8080/hubs/");const a=(new w).withUrl(t+e,{skipNegotiation:!0,transport:D.WebSockets}).withAutomaticReconnect([3e3,4e3,1e4,1e4]).build();return a.serverTimeoutInMilliseconds=3e4,B(a),a.onreconnecting((e=>{})),a.onreconnected((e=>{})),a.onclose((async e=>{await B(a)})),a},B=async e=>{try{await e.start().then((()=>{clearInterval(R),R=null})).catch((()=>{R=setTimeout((()=>{B(e)}),5e3)}))}catch(t){R=setTimeout((()=>{B(e)}),5e3)}},k=(e,t)=>{if(!e)return"";const a=new Date(e),l={"M+":a.getMonth()+1,"d+":a.getDate(),"H+":a.getHours(),"m+":a.getMinutes(),"s+":a.getSeconds(),"q+":Math.floor((a.getMonth()+3)/3),S:a.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(a.getFullYear()+"").substr(4-RegExp.$1.length)));for(const s in l)new RegExp("("+s+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?l[s]:("00"+l[s]).substr((""+l[s]).length)));return t},L=["周日","周一","周二","周三","周四","周五","周六"],j={class:"screen-header"},I={class:"screen-header-top-section"},C={class:"screen-header-title-section"},H={class:"title-section"},W={class:"header-title"},E={class:"screen-header-bottom-section"},T={class:"sub-section"},O={class:"sub-item flex-l sub-item-common-r"},F={class:"sub-title special"},N=(e=>(m("data-v-8d6fcc43"),e=e(),u(),e))((()=>o("div",{class:"sub-item flex-c react-l"},null,-1))),z={class:"sub-dec-section"},A={class:"sub-section"},P={class:"sub-item flex-c react-r item-special"},$={class:"sub-title"},G={class:"sub-item flex-r sub-item-common-l"},Q={class:"sub-title"},Y=S(t({__name:"ScreenHeader",props:{headertitle:{type:String,default:()=>"线体看板默认值"},linename:{type:String,default:()=>"默认值"},module:{type:String,default:()=>{}}},setup(e){const t=e,m=a({setInterval:0,dateDay:"",dateYear:"",dateWeek:"",plclinkstatus:!1,plclinkscolor:"gainsboro"});return l((()=>{((e,t)=>{M(e).on("ReceiveServiceMessage",(e=>{t.dateDay=k(e.nowtime,"HH:mm"),t.dateYear=k(e.nowtime,"yyyy-MM-dd"),t.dateWeek=L[e.week],t.plclinkstatus=e.linkstatus,e.linkstatus?t.plclinkscolor="cornflowerblue":t.plclinkscolor="red"}))})(t.module,m)})),s((()=>{clearInterval(m.setInterval)})),(t,a)=>{const l=p("dv-decoration-10"),s=p("dv-decoration-8"),u=p("dv-decoration-6");return h(),i("div",j,[o("div",I,[r(l,{color:["#45a1f1","#000000"],class:"dv-dec-10",dur:10}),o("div",C,[r(s,{color:["#45a1f1","#000000"],class:"dv-dec-8"}),o("div",H,[o("p",W,d(e.headertitle),1)]),r(s,{color:["#45a1f1","#000000"],class:"dv-dec-8",reverse:!0})]),r(l,{color:["#45a1f1","#000000"],class:"dv-dec-10 dev-reverse",reverse:!0,dur:10})]),o("div",E,[o("div",T,[o("div",O,[o("span",F,"生产"+d(e.linename)+"线",1)]),N]),o("div",z,[r(u,{class:"dv-dec-6",reverse:!0,color:["#50e3c2","#67a1e5"]})]),o("div",A,[o("div",P,[o("span",$,[n(" PLC状态: "),o("i",{class:"iconfont icon-early-warning",style:c([{"margin-left":"10px"},{color:m.plclinkscolor}])},null,4)])]),o("div",G,[o("span",Q,d(m.dateYear)+"  "+d(m.dateDay)+"  "+d(m.dateWeek),1)])])])])}}}),[["__scopeId","data-v-8d6fcc43"]]),q={class:"screen-footer"},J={class:"screen-footer-left"},K={class:"screen-footer-middle"},U={class:"screen-footer-right"};const X=S({},[["render",function(e,t){const a=p("dv-decoration-10"),l=p("dv-decoration-5");return h(),i("div",q,[o("div",J,[r(a,{color:["#45a1f1","#000000"],class:"dv-dec-10",dur:10})]),o("div",K,[r(l,{color:["#45a1f1","#000000"],dur:10})]),o("div",U,[r(a,{color:["#45a1f1","#000000"],class:"dv-dec-10 dev-reverse",dur:10})])])}],["__scopeId","data-v-844d683c"]]),V=e=>(m("data-v-6aa73635"),e=e(),u(),e),Z={class:"screen-top-left1"},ee={class:"screen-top-header flex-l"},te=V((()=>o("div",{class:"header-left flex-c"},[
o("i",{class:"icomoon icon-assemble-copy"})],-1))),ae={class:"header-right flex-l"},le={class:"header-title"},se=V((()=>o("div",{class:"screen-top-chart"},[
o("img",{style:{width:"200px",height:"200px","margin-left":"15px","margin-bottom":"15px","align-content":"center"},src:"/huacai/assets/logo.3e245b07.jpg"})],-1))),ie={class:"screen-top-data flex-l"},oe={class:"data-item"},re={class:"data-item-top flex-l"},de=V((()=>o("i",{class:"icomoon icon-model"},null,-1))),ne={class:"dv-digital-flop"},ce=V((()=>o("div",{class:"data-item-bottom flex-c"},[
o("span",{class:"data-item-title"}," 识别型号 ")],-1))),me={class:"data-item"},ue={class:"data-item-top flex-l"},he=V((()=>o("i",{class:"icomoon icon-order2"},null,-1))),pe={class:"dv-digital-flop"},fe=V((()=>o("div",{class:"data-item-bottom flex-c"},[
o("span",{class:"data-item-title"}," 识别归属订单 ")],-1))),ve={class:"data-item"},ge={class:"data-item-top flex-l"},ye=V((()=>o("i",{class:"icomoon icon-model"},null,-1))),be={class:"dv-digital-flop"},xe=V((()=>o("div",{class:"data-item-bottom flex-c"},[
o("span",{class:"data-item-title"}," 当前生产型号 ")],-1))),we={class:"data-item"},De={class:"data-item-top flex-l"},Se=V((()=>o("i",{class:"icomoon icon-order2"},null,-1))),_e={class:"dv-digital-flop"},Re=V((()=>o("div",{class:"data-item-bottom flex-c"},[
o("span",{class:"data-item-title"}," 当前生产订单 ")],-1))),Me=S(t({__name:"ScreenTopLeft",props:{headertitle:{type:String,default:()=>"模块标题默认值"},linename:{type:String,default:()=>"默认值"},module:{type:String,default:()=>"Null"}},setup(e){const t=e,n=a({identifyModel:{value:""},prodModel:{value:""},identifyOrder:{value:""},prodOrder:{value:""}});return l((()=>{((e,t)=>{M(e).on("ReceiveServiceMessage",(e=>{void 0!==e&&(t.identifyModel.value=e.identifyModel,t.identifyOrder.value=e.identifyOrder,t.prodModel.value=e.prodModel,t.prodOrder.value=e.prodOrder)}))})(t.module,n)})),f((()=>n),(e=>{}),{immediate:!0,deep:!0}),s((()=>{})),(t,a)=>{const l=p("dv-decoration-3");return h(),i("div",Z,[o("div",ee,[te,o("div",ae,[o("span",le,d(e.headertitle),1),r(l,{class:"dv-dec-3"})])]),se,o("div",ie,[o("div",oe,[o("div",re,[de,o("span",ne,d(n.identifyModel.value),1)]),ce]),o("div",me,[o("div",ue,[he,o("span",pe,d(n.identifyOrder.value),1)]),fe]),o("div",ve,[o("div",ge,[ye,o("span",be,d(n.prodModel.value),1)]),xe]),o("div",we,[o("div",De,[Se,o("span",_e,d(n.prodOrder.value),1)]),Re])])])}}}),[["__scopeId","data-v-6aa73635"]]),Be={class:"screen-top-right2"},ke={class:"screen-top-header flex-l"},Le=(e=>(m("data-v-b97e159e"),e=e(),u(),e))((()=>o("div",{class:"header-left flex-c"},[
o("i",{class:"icomoon icon-assemble"})],-1))),je={class:"header-right flex-l"},Ie={class:"header-title"},Ce={class:"screen-top-chart"},He=S(t({__name:"ScreenTopRight",props:{headertitle:{type:String,default:()=>"模块标题默认值"},linename:{type:String,default:()=>"默认值"},module:{type:String,default:()=>"Null"}},setup(e){const t=e;l((()=>{var e,a;e=t.module,a=s,M(e).on("ReceiveServiceMessage",(e=>{if(void 0!==e){let t=[];if(void 0!==e.listData&&e.listData.length>0)for(let a=0;a<e.listData.length;a++)t.push([e.listData[a].day1,e.listData[a].prodModel,e.listData[a].targetProdQty]);a.data=t}}))}));const s=a({header:["外壳条码","内胆条码","装配时间"],data:[["46541324","11496","<span class='scr-up'>↑22%</span>"],["46541324","7884","<span class='scr-down'>↓13%</span>"],["46541324","5724","<span class='scr-up'>↑32%</span>"],["46541324","5033","<span class='scr-up'>↑34%</span>"],["46541324","4345","<span class='scr-up'>↑25%</span>"],["46541324","4224","<span class='scr-up'>↑13%</span>"],["46541324","3686","<span class='scr-up'>↑24%</span>"],["46541324","3125","<span class='scr-down'>↓16%</span>"],["46541324","2936","<span class='scr-down'>↓23%</span>"],["46541324","2221","<span class='scr-up'>↑45%</span>"]],rowNum:7,headerHeight:35,headerBGC:"#0f1325",oddRowBGC:"#0f1325",evenRowBGC:"#171c33",index:!0,columnWidth:[50],align:["center"]});return(t,a)=>{const l=p("dv-decoration-1"),n=p("dv-scroll-board");return h(),i("div",Be,[o("div",ke,[Le,o("div",je,[o("span",Ie,d(e.headertitle),1),r(l,{class:"dv-dec-1"})])]),o("div",Ce,[r(n,{class:"dv-scr-board",config:s},null,8,["config"])])])}}}),[["__scopeId","data-v-b97e159e"]]),We=t({__name:"ChartBottomLeft",props:{chartData:{type:Object,default:()=>({category:[],lineData:[],barData:[],rateData:[]})}},setup(e){const t=e,l=a({height:"400px",width:"100%",options:{tooltip:{show:!0,trigger:"item",axisPointer:{type:"shadow",label:{show:!0,backgroundColor:"#7B7DDC"}}},legend:{show:!0},grid:{x:"8%",width:"88%",top:"5%",bottom:"7%"},xAxis:{data:t.chartData.category,axisLine:{lineStyle:{color:"#B4B4B4"}},axisTick:{show:!1}},yAxis:[{splitLine:{show:!1},axisLine:{lineStyle:{color:"#B4B4B4"}},axisLabel:{formatter:"{value} "}},{splitLine:{show:!1},axisLine:{lineStyle:{color:"#B4B4B4"}},axisLabel:{formatter:"{value} "}}],series:[{name:"完成率",type:"line",smooth:!0,label:{show:!0,position:"bottom",textStyle:{fontSize:14,color:"#ffffff"}},showAllSymbol:!0,symbol:"emptyCircle",symbolSize:8,yAxisIndex:1,itemStyle:{normal:{color:"#ffdb5c"}},data:t.chartData.rateData},{name:"产量",type:"bar",barWidth:10,itemStyle:{normal:{barBorderRadius:5,color:new _(0,0,0,1,[{offset:0,color:"#e7bcf3"},{offset:1,color:"#3EACE5"}])}},data:t.chartData.barData},{name:"目标",type:"bar",barGap:"-100%",barWidth:10,itemStyle:{normal:{barBorderRadius:5,color:new _(0,0,0,1,[{offset:0,color:"rgba(50,197,233,0.8)"},{offset:.2,color:"rgba(50,197,233,0.5)"},{offset:1,color:"rgba(50,197,233,0.2)"}])}},z:-12,data:t.chartData.lineData}]}});return f((()=>t.chartData),(e=>{l.options.xAxis.data=e.category,l.options.series[0].data=e.rateData,l.options.series[1].data=e.barData,l.options.series[2].data=e.lineData}),{immediate:!0,deep:!0}),(e,t)=>{const a=p("mEcharts");return h(),v(a,{options:l.options,height:l.height,width:l.width},null,8,["options","height","width"])}}}),Ee={class:"screen-bottom-left"},Te={class:"screen-bottom-header flex-l"},Oe=(e=>(m("data-v-3191497c"),e=e(),u(),e))((()=>o("div",{class:"header-left flex-c"},[
o("i",{class:"iconfont icon-align-left"})],-1))),Fe={class:"header-right flex-l"},Ne={class:"header-title"},ze={class:"screen-bottom-chart"},Ae=S(t({__name:"ScreenBottomLeft",props:{headertitle:{type:String,default:()=>"模块标题默认值"},linename:{type:String,default:()=>"默认值"},module:{type:String,default:()=>"Null"}},setup(e){const t=e,s=a({category:[],lineData:[],barData:[],rateData:[]});return l((()=>{var e,a;e=t.module,a=s,M(e).on("ReceiveServiceMessage",(e=>{if(void 0!==e&&9==e.dateDay.length&&e.dateDay.length==e.actualProdQty.length&&e.dateDay.length==e.targetProdQty.length){a.category=e.dateDay,a.lineData=e.targetProdQty,a.barData=e.actualProdQty,a.rateData=[];for(let e=0;e<a.barData.length;e++){const t=a.barData[e]/a.lineData[e];a.rateData.push(t.toFixed(2))}}}))})),(t,a)=>{const l=p("dv-decoration-1");return h(),i("div",Ee,[o("div",Te,[Oe,o("div",Fe,[o("span",Ne,d(e.headertitle),1),r(l,{class:"dv-dec-1"})])]),o("div",ze,[r(We,{"chart-data":s},null,8,["chart-data"])])])}}}),[["__scopeId","data-v-3191497c"]]),Pe=t({__name:"ChartBottomRight",props:{chartData:{type:Object,default:()=>({year:0,radarData:[],indicator:[]})}},setup(e){const t=e,l=a({height:"100%",width:"100%",options:{radar:{center:["50%","50%"],radius:"73%",name:{color:"#fff"},shape:"circle",splitNumber:5,axisName:{color:"rgb(238, 197, 102)"},axisLine:{lineStyle:{color:{type:"linear",x:0,y:0,x2:1,y2:1,colorStops:[{offset:0,color:"#f5b44d"},{offset:1,color:"#28f8de"}]},opacity:.6}},splitLine:{lineStyle:{color:"rgba(238, 197, 102, 0.5)"}},splitArea:{show:!1},indicator:[{name:"08/09",max:20},{name:"08/10",max:20},{name:"08/11",max:20},{name:"08/12",max:20},{name:"08/13",max:20},{name:"0/14",max:20},{name:"0/15",max:20}]},series:[{name:"",type:"radar",symbolSize:0,lineStyle:{normal:{opacity:.3}},areaStyle:{opacity:.3},itemStyle:{normal:{color:"#f8d351"}},data:[{value:[3,5,5,1,2,3,1],name:"目标"}]}]}});return f((()=>t.chartData),(e=>{l.options.series[0].data[0].value=e.radarData,void 0!==e.indicator&&e.indicator.length>0&&(l.options.radar.indicator=e.indicator)}),{immediate:!0,deep:!0}),(e,t)=>{const a=p("mEcharts");return h(),v(a,{options:l.options,height:l.height,width:l.width},null,8,["options","height","width"])}}}),$e={class:"screen-bottom-right"},Ge={class:"screen-bottom-header flex-l"},Qe=(e=>(m("data-v-9b17f5f7"),e=e(),u(),e))((()=>o("div",{class:"header-left flex-c"},[
o("i",{class:"iconfont icon-chart-line"})],-1))),Ye={class:"header-right flex-l"},qe={class:"header-title"},Je={class:"screen-chart-section2-1"},Ke=S(t({__name:"ScreenBottomRight",props:{headertitle:{type:String,default:()=>"模块标题默认值"},linename:{type:String,default:()=>"默认值"},module:{type:String,default:()=>"Null"}},setup(e){const t=e,n=a({listData:{header:["日期","型号","目标(件)"],data:[],rowNum:7,headerHeight:35,headerBGC:"#0f1325",oddRowBGC:"#0f1325",evenRowBGC:"#171c33",index:!1,columnWidth:[120,200,120],align:["center"]},chartData:{year:0,radarData:[],indicator:[]}});return l((()=>{((e,t)=>{M(e).on("ReceiveServiceMessage",(e=>{if(void 0!==e){let a=[];if(void 0!==e.listData&&e.listData.length>0)for(let t=0;t<e.listData.length;t++)a.push([e.listData[t].day1,e.listData[t].prodModel,e.listData[t].targetProdQty]);if(t.listData.data=a,t.chartData.indicator=[],t.chartData.radarData=[],void 0!==e.dateDay&&e.dateDay.length>0&&e.dateDay.length==e.averageSpeed.length&&e.dateDay.length==e.maxSpeed.length)for(let l=0;l<e.dateDay.length;l++){const a={name:e.dateDay[l],max:e.maxSpeed[l]};t.chartData.radarData.push(e.averageSpeed[l]),t.chartData.indicator.push(a)}}}))})(t.module,n)})),s((()=>{})),(t,a)=>{const l=p("dv-decoration-3"),s=p("dv-scroll-board");return h(),i("div",$e,[o("div",Ge,[Qe,o("div",Ye,[o("span",qe,d(e.headertitle),1),r(l,{class:"dv-dec-3"})])]),o("div",Je,[o("div",null,[r(Pe,{"chart-data":n.chartData},null,8,["chart-data"])]),o("div",null,[r(s,{class:"dv-scr-board",config:n.listData},null,8,["config"])])])])}}}),[["__scopeId","data-v-9b17f5f7"]]),Ue={class:"screen-container"},Xe={key:0,class:"mask flex-c"},Ve=(e=>(m("data-v-def56e57"),e=e(),u(),e))((()=>o("span",{class:"loading-title"},"加载中...",-1))),Ze={class:"header-section"},et={class:"screen-chart-section1"},tt={class:"screen-chart-section2"},at={class:"footer-section"},lt=S(t({__name:"Screen",setup(t){const d=a({headertitle:"冰箱装配生产线",linename:"H",module1:{headertitle:"入口一(外壳)",module:"TopLeft1"},module2:{headertitle:"入口二(内胆)",module:"TopLeft2"},module5:{headertitle:"(外壳+内胆)装配信息",module:"TopRight"},module6:{headertitle:"当前9天产量统计",module:"BottomLeft"},module7:{headertitle:"生产计划(目标)",module:"BottomRight"}}),{screenRef:n,calcRate:c,windowDraw:m,unWindowDraw:u}=function(){const t=e(),a=e(0),l={width:"1",height:"1"},s=1920,i=1080,o=parseFloat(1.7777777777777777.toFixed(5)),r=()=>{const e=parseFloat((window.innerWidth/window.innerHeight).toFixed(5));t.value&&(e>o?(l.width=(window.innerHeight*o/s).toFixed(5),l.height=(window.innerHeight/i).toFixed(5),t.value.style.transform=`scale(${l.width}, ${l.height})`):(l.height=(window.innerWidth/o/i).toFixed(5),l.width=(window.innerWidth/s).toFixed(5),t.value.style.transform=`scale(${l.width}, ${l.height})`))},d=()=>{clearTimeout(a.value),a.value=window.setTimeout((()=>{r()}),200)};return{screenRef:t,calcRate:r,windowDraw:()=>{window.addEventListener("resize",d)},unWindowDraw:()=>{window.removeEventListener("resize",d)}}}(),f=e(!0);return l((()=>{m(),c(),setTimeout((()=>{f.value=!1}),2e3)})),s((()=>{u()})),(e,t)=>{const a=p("dv-loading"),l=p("dv-border-box-12"),s=p("dv-border-box-13"),c=x("wechat-title");return g((h(),i("div",Ue,[o("div",{class:"screen-content",ref_key:"screenRef",ref:n},[f.value?(h(),i("div",Xe,[r(a,null,{default:y((()=>[Ve])),_:1})])):b("",!0),o("div",Ze,[r(Y,{headertitle:d.headertitle,linename:d.linename,module:"Header"},null,8,["headertitle","linename"])]),o("div",et,[r(l,null,{default:y((()=>[r(Me,{linename:d.linename,headertitle:d.module1.headertitle,module:d.module1.module},null,8,["linename","headertitle","module"])])),_:1}),r(l,null,{default:y((()=>[r(Me,{linename:d.linename,headertitle:d.module2.headertitle,module:d.module2.module},null,8,["linename","headertitle","module"])])),_:1}),r(s,null,{default:y((()=>[r(He,{linename:d.linename,headertitle:d.module5.headertitle,module:d.module5.module},null,8,["linename","headertitle","module"])])),_:1})]),o("div",tt,[r(s,null,{default:y((()=>[r(Ae,{linename:d.linename,headertitle:d.module6.headertitle,module:d.module6.module},null,8,["linename","headertitle","module"])])),_:1}),r(l,null,{default:y((()=>[r(Ke,{linename:d.linename,headertitle:d.module7.headertitle,module:d.module7.module},null,8,["linename","headertitle","module"])])),_:1})]),o("div",at,[r(X)])],512)])),[[c,d.headertitle]])}}}),[["__scopeId","data-v-def56e57"]]);export{lt as default};